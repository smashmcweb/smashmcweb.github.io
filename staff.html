<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Staff Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:'Segoe UI',Arial;background:linear-gradient(135deg,#0ea5e9,#1e3a8a);color:#fff}
header{text-align:center;padding:30px 20px;background:rgba(2,6,23,.9)}
section{max-width:700px;margin:20px auto;padding:20px;border-radius:12px;border:2px solid #38bdf8;background:rgba(30,64,175,0.85)}
input,button{padding:6px;border-radius:6px;border:none;margin:5px 0}
button{cursor:pointer;font-weight:bold}
button.green{background:#22c55e;color:#fff}
button.yellow{background:#facc15;color:#000}
button.red{background:#ef4444;color:#fff}
.productItem{display:flex;justify-content:space-between;background:rgba(2,6,23,.8);padding:8px;border-radius:6px;margin:5px 0}
</style>
</head>
<body>

<header>
<h1>⚙️ MediaMC Staff Panel</h1>
</header>

<section id="loginSection">
<h2>Login Staff</h2>
<input type="password" id="staffPass" placeholder="Inserisci Password">
<button onclick="staffLogin()">Accedi</button>
<p id="loginMsg"></p>
</section>

<section id="staffPanel" style="display:none">

<h2>Ordini</h2>
<input type="text" id="searchOrder" placeholder="Inserisci ID ordine">
<button class="green" onclick="searchOrder()">Cerca</button>
<div id="orderResult"></div>

<hr>
<h2>Gift Card</h2>
<button class="yellow" onclick="createGift()">Crea Gift Card</button>
<div id="giftList"></div>

<hr>
<h2>Categorie e Prodotti</h2>
<button class="yellow" onclick="createCategory()">Crea Categoria</button>
<div id="categoryList"></div>
<button class="yellow" onclick="createProduct()">Crea Prodotto</button>
<div id="productList"></div>

</section>

<script>
const staffPassword='staff123';

// LOGIN STAFF
function staffLogin(){
  const pass=document.getElementById('staffPass').value;
  const msg=document.getElementById('loginMsg');
  if(pass===staffPassword){
    document.getElementById('loginSection').style.display='none';
    document.getElementById('staffPanel').style.display='block';
    renderGiftCards();
    renderCategories();
    renderProducts();
  } else {
    msg.textContent='Password errata';
  }
}

// ORDINI
function searchOrder(){
  const id=document.getElementById('searchOrder').value.trim();
  const orders=JSON.parse(localStorage.getItem('orders'))||[];
  const res=document.getElementById('orderResult');
  const order=orders.find(o=>o.id===id);
  if(order){
    res.innerHTML=`<p>Nick: ${order.nick}</p>
                   <p>Totale: €${order.total}</p>
                   <p>Prodotti: ${order.cart.map(p=>p.name).join(', ')}</p>
                   <p>Data: ${order.date}</p>`;
  } else res.textContent='Ordine non trovato';
}

// GIFT CARD
function createGift(){
  const name=prompt("Nome Gift Card");
  const value=parseFloat(prompt("Valore Gift Card"));
  if(!name||isNaN(value)) return;
  let giftCards=JSON.parse(localStorage.getItem('giftCards'))||[];
  const code='GC-'+Math.floor(Math.random()*100000);
  giftCards.push({code, name, value, used:false});
  localStorage.setItem('giftCards',JSON.stringify(giftCards));
  renderGiftCards();
}

function renderGiftCards(){
  const giftCards=JSON.parse(localStorage.getItem('giftCards'))||[];
  const list=document.getElementById('giftList');
  list.innerHTML='';
  giftCards.forEach((g,idx)=>{
    list.innerHTML+=`<div class="productItem">
      <span>${g.name} (${g.code}) - €${g.value} ${g.used?'[Usata]':''}</span>
      <button class="red" onclick="removeGift(${idx})">Elimina</button>
    </div>`;
  });
}
function removeGift(idx){
  let giftCards=JSON.parse(localStorage.getItem('giftCards'))||[];
  giftCards.splice(idx,1);
  localStorage.setItem('giftCards',JSON.stringify(giftCards));
  renderGiftCards();
}

// CATEGORIE
function createCategory(){
  const name=prompt("Nome Categoria");
  if(!name) return;
  let cats=JSON.parse(localStorage.getItem('categories'))||[];
  cats.push({name});
  localStorage.setItem('categories',JSON.stringify(cats));
  renderCategories();
}

function renderCategories(){
  const cats=JSON.parse(localStorage.getItem('categories'))||[];
  const list=document.getElementById('categoryList');
  list.innerHTML='';
  cats.forEach((c,idx)=>{
    list.innerHTML+=`<div class="productItem">
      <span>${c.name}</span>
      <button class="red" onclick="removeCategory(${idx})">Elimina</button>
    </div>`;
  });
}
function removeCategory(idx){
  let cats=JSON.parse(localStorage.getItem('categories'))||[];
  cats.splice(idx,1);
  localStorage.setItem('categories',JSON.stringify(cats));
  renderCategories();
}

// PRODOTTI
function createProduct(){
  const title=prompt("Titolo Prodotto");
  const category=prompt("Categoria Prodotto");
  const price=parseFloat(prompt("Prezzo"));
  const desc=prompt("Descrizione");
  const image=prompt("URL immagine");
  if(!title||!category||isNaN(price)) return;
  let products=JSON.parse(localStorage.getItem('products'))||[];
  products.push({title, category, price, desc, image});
  localStorage.setItem('products',JSON.stringify(products));
  renderProducts();
}

function renderProducts(){
  const products=JSON.parse(localStorage.getItem('products'))||[];
  const list=document.getElementById('productList');
  list.innerHTML='';
  products.forEach((p,idx)=>{
    list.innerHTML+=`<div class="productItem">
      <span>${p.title} (${p.category}) - €${p.price}</span>
      <button class="red" onclick="removeProduct(${idx})">Elimina</button>
    </div>`;
  });
}

function removeProduct(idx){
  let products=JSON.parse(localStorage.getItem('products'))||[];
  products.splice(idx,1);
  localStorage.setItem('products',JSON.stringify(products));
  renderProducts();
}
</script>

</body>
</html>
