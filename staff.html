<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Staff Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#0ea5e9,#1e3a8a);color:#fff}
header{text-align:center;padding:40px 20px;background:rgba(2,6,23,.9)}
section{max-width:800px;margin:30px auto;background:rgba(30,64,175,0.85);padding:20px;border-radius:12px;border:2px solid #38bdf8}
input{padding:7px;border-radius:6px;border:none;width:90%;margin-bottom:10px}
button{background:#38bdf8;border:none;border-radius:6px;padding:6px 12px;color:#fff;font-weight:bold;cursor:pointer;margin:5px 0}
#content{display:none;margin-top:15px;padding:10px;border-radius:8px}
.orderItem, .giftItem{background:rgba(2,6,23,.8);padding:8px;border-radius:6px;margin:5px 0;display:flex;justify-content:space-between}
h3{margin-top:20px;color:#38bdf8}
</style>
</head>
<body>

<header>
<h1>⚙️ Staff Panel MediaMC</h1>
<p>Accesso riservato allo staff</p>
</header>

<section>
<h2>Login Staff</h2>
<input type="password" id="staffPass" placeholder="Inserisci password">
<button onclick="checkStaff()">Accedi</button>

<div id="content">
  <h3>Ricerca Ordine per ID</h3>
  <input id="searchId" placeholder="Inserisci ID ordine">
  <button onclick="searchOrder()">Cerca</button>
  <div id="orderResult"></div>

  <h3>Crea Gift Card</h3>
  <input type="number" id="giftValue" placeholder="Valore €">
  <button onclick="createGiftCard()">Crea Gift Card</button>

  <h3>Gift Card Attive</h3>
  <div id="giftList"></div>
</div>
</section>

<script>
let giftCards=JSON.parse(localStorage.getItem('giftCards'))||[];

function checkStaff(){
  const pass=document.getElementById('staffPass').value;
  if(pass==='staff123'){
    document.getElementById('content').style.display='block';
    alert('Accesso consentito');
    renderGiftCards();
  } else alert('Password errata');
}

// CREAZIONE GIFT CARD
function createGiftCard(){
  const val=parseInt(document.getElementById('giftValue').value);
  if(!val || val<=0) return alert('Inserisci un valore valido');
  const code='GIFT'+Math.floor(Math.random()*100000);
  giftCards.push({code,value:val,used:false});
  localStorage.setItem('giftCards',JSON.stringify(giftCards));
  renderGiftCards();
  alert(`Gift Card ${code} creata!`);
}

// RENDER GIFT CARD
function renderGiftCards(){
  const list=document.getElementById('giftList');
  list.innerHTML='';
  if(giftCards.length===0) return list.textContent='Nessuna gift card';
  giftCards.forEach((g,idx)=>{
    list.innerHTML+=`<div class="giftItem">${g.code} - €${g.value} - ${g.used?'Usata':'Attiva'} 
      <button onclick="deleteGift(${idx})" style="margin-left:10px;background:#ef4444;color:#fff">Elimina</button>
    </div>`;
  });
}

// ELIMINA GIFT CARD
function deleteGift(idx){
  giftCards.splice(idx,1);
  localStorage.setItem('giftCards',JSON.stringify(giftCards));
  renderGiftCards();
}

// RICERCA ORDINE PER ID
function searchOrder(){
  const id=document.getElementById('searchId').value.trim();
  const data=JSON.parse(localStorage.getItem('checkoutData'));
  const resDiv=document.getElementById('orderResult');
  if(!data || data.id!==id){ resDiv.textContent='Ordine non trovato'; return; }
  resDiv.innerHTML=`<div class="orderItem"><span>ID: ${data.id} | Nick: ${data.nick}</span><span>Totale: €${data.total}</span></div>`;
  data.cart.forEach(p=>{
    resDiv.innerHTML+=`<div class="orderItem" style="margin-left:20px">${p.name} - €${p.price}</div>`;
  });
  resDiv.innerHTML+=`<button style="margin-top:5px;background:#ef4444;color:#fff" onclick="removeOrder()">Rimuovi ordine</button>`;
}

// RIMUOVI ORDINE
function removeOrder(){
  localStorage.removeItem('checkoutData');
  document.getElementById('orderResult').innerHTML='Ordine rimosso';
  alert('Ordine eliminato');
}
</script>

</body>
</html>
