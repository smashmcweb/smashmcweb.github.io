<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Segoe UI',Arial;
  background:linear-gradient(135deg,#0ea5e9,#020617);
  color:#fff;
}
header{text-align:center;padding:40px;background:rgba(2,6,23,.85)}
h1{color:#38bdf8}
button{background:#38bdf8;border:none;border-radius:6px;padding:6px 12px;color:#fff;cursor:pointer}
.section{max-width:900px;margin:30px auto;background:rgba(2,6,23,.8);border:2px solid #38bdf8;border-radius:12px;padding:15px}
.category{cursor:pointer;margin:10px 0;padding:10px;border:1px solid #38bdf8;border-radius:8px}
.products{display:none;margin-top:10px}
.product{display:flex;justify-content:space-between;background:rgba(30,64,175,.6);margin:5px 0;padding:8px;border-radius:6px}
footer{text-align:center;padding:30px;color:#94a3b8}
.small{font-size:13px;margin-top:10px}
</style>
</head>

<body>

<header>
  <h1>ðŸ›’ MediaMC Store</h1>
  <button onclick="openNick()">Entra nello store</button>
  <button onclick="location.href='cart.html'">Vai al Carrello</button>
</header>

<div class="section" id="store"></div>

<footer>
  <button onclick="openStaff()">Pannello Staff</button>
</footer>

<!-- MODAL NICK -->
<div id="nickModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.7)">
  <div style="background:#020617;padding:20px;border-radius:10px;max-width:300px;margin:15% auto">
    <h3>Inserisci nick Minecraft</h3>
    <input id="nickInput" style="width:100%;padding:6px">
    <button onclick="saveNick()">Entra</button>
  </div>
</div>

<!-- STAFF LOGIN -->
<div id="staffModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.7)">
  <div style="background:#020617;padding:20px;border-radius:10px;max-width:300px;margin:15% auto">
    <h3>Login Staff</h3>
    <input id="staffPass" type="password" placeholder="Password" style="width:100%;padding:6px">
    <button onclick="staffLogin()">Accedi</button>
  </div>
</div>

<script>
let categories = JSON.parse(localStorage.getItem('categories')) || [
  {name:'Duels'},
  {name:'Bedwars'}
];
let products = JSON.parse(localStorage.getItem('products')) || [];

function openNick(){
  document.getElementById('nickModal').style.display='block';
}
function saveNick(){
  const n=document.getElementById('nickInput').value.trim();
  if(!n) return alert('Inserisci nick');
  localStorage.setItem('nick',n);
  document.getElementById('nickModal').style.display='none';
  render();
}
function openStaff(){
  document.getElementById('staffModal').style.display='block';
}
function staffLogin(){
  if(document.getElementById('staffPass').value==='staff123'){
    location.href='staff.html';
  }else alert('Password errata');
}

function render(){
  const store=document.getElementById('store');
  store.innerHTML='';
  categories.forEach(cat=>{
    const c=document.createElement('div');
    c.className='category';
    c.innerHTML=`<strong>${cat.name}</strong>`;
    const p=document.createElement('div');
    p.className='products';

    products.filter(x=>x.category===cat.name).forEach(pr=>{
      p.innerHTML+=`
      <div class="product">
        <span>${pr.title} - â‚¬${pr.price}</span>
        <button onclick="addToCart('${pr.title}',${pr.price})">+</button>
      </div>`;
    });

    c.onclick=()=>p.style.display=p.style.display==='block'?'none':'block';
    store.appendChild(c);
    store.appendChild(p);
  });
}

function addToCart(title,price){
  const nick=localStorage.getItem('nick');
  if(!nick) return alert('Inserisci il nick');
  const key='cart_'+nick;
  const cart=JSON.parse(localStorage.getItem(key))||[];
  cart.push({name:title,price});
  localStorage.setItem(key,JSON.stringify(cart));
  alert('Aggiunto');
}

render();
</script>
</body>
</html>
